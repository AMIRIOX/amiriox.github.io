<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta http-equiv="X-UA-Compatible" content="IE=edge">

<title>CSAPP 2021-01-18 | Amiriox's Storage
</title>


  <meta name="description" content="世界再大 不过是些代价">



  <link rel="icon" href="/images/favicon-32x32.ico">



<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700;900&family=Lora:ital,wght@0,400;0,600;1,400&family=Libre+Baskerville:wght@400;700&display=swap" rel="stylesheet">

<link rel="stylesheet" href="/css/style.css">



<script>
  window.MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      processEscapes: true,
      processEnvironments: true,
      tags: 'ams'
    },
    options: {
      skipHtmlTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>
<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js"></script>


<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"><link rel="alternate" href="/atom.xml" title="Amiriox's Storage" type="application/atom+xml">
</head>
<body>
  <div class="newspaper-wrapper">
    <header class="newspaper-header">
  <div class="header-top">
    <div class="header-edition">Morning Edition</div>
    <div class="header-date">星期三, 一月 28, 2026</div>
    <button class="theme-toggle" aria-label="Toggle dark mode">
      <span class="toggle-sun">☀</span>
      <span class="toggle-moon">☾</span>
    </button>
  </div>
  
  <div class="masthead">
    <h1 class="newspaper-title">
      <a href="/">折鸦夜明け前</a>
    </h1>
    <p class="newspaper-motto">我们的同志在困难的时候，要看到成绩，要看到光明，要提高我们的勇气。</p>
  </div>
  
  <nav class="newspaper-nav">
    <div class="nav-divider"></div>
    <ul class="nav-menu">
      
        <li class="nav-item">
          <a href="/" class="nav-link">Home</a>
        </li>
      
        <li class="nav-item">
          <a href="/archives" class="nav-link">Archives</a>
        </li>
      
        <li class="nav-item">
          <a href="/categories" class="nav-link">Categories</a>
        </li>
      
        <li class="nav-item">
          <a href="/tags" class="nav-link">Tags</a>
        </li>
      
        <li class="nav-item">
          <a href="/about" class="nav-link">About</a>
        </li>
      
    </ul>
    <div class="nav-divider"></div>
  </nav>
</header>

    
    <main class="newspaper-content">
      
<div class="post-container">
  <article class="post-full">
    <header class="post-header">
      <div class="post-meta-top">
        
          <span class="post-category">组成原理</span>
        
        <time datetime="2021-01-17T16:00:00.000Z" class="post-date">
          星期一, 一月 18, 2021</time>
      </div>
      
      <h1 class="post-title">CSAPP 2021-01-18</h1>
      
      
      
      <div class="post-byline">
        
          <span class="post-author">By 折鸦夜明け前</span>
        
        
          <span class="post-updated">Updated 十二月 31, 2025</span>
        
      </div>
    </header>
    
    <div class="post-divider"></div>
    
    <div class="post-content">
      <blockquote>
<p>此文章的 <em>撰写时间</em> 可能有误</p>
</blockquote>
<h1 id="csapp-today-2021-01-18">CSAPP Today 2021-01-18</h1>
<h2 id="一-左移和右移">一 左移和右移</h2>
<p>对于<code>x&lt;&lt;k</code>称为将 <span
class="math inline">\(x\)</span> 左移 <span
class="math inline">\(k\)</span> 位。 对于一个位向量表示为 <span
class="math inline">\([x_{w-1}, x_{w-2}, ..., x_0]\)</span> 的操作数
<span class="math inline">\(x\)</span>, <code>x&lt;&lt;k</code>的结果是$
[x_{w-k-1}, x_{w-k-2}, …, x_0, 0, …, 0] $ 也就是向左移动 <span
class="math inline">\(k\)</span> 位, 右侧空缺用0补齐。
在C中，左移运算符从左至右结合。即<code>x&lt;&lt;i&lt;&lt;j</code>相当于<code>(x&lt;&lt;j)&lt;&lt;k</code></p>
<p>对于<code>x&gt;&gt;k</code>成为将 <span
class="math inline">\(x\)</span> 右移 <span
class="math inline">\(k\)</span> 位。
不同的是，<strong>右移有两种形势，算术右移和逻辑右移</strong>。</p>
<h3 id="逻辑右移">1.1 逻辑右移</h3>
<p>逻辑右移与左移相对，即对于一个位向量表示为 <span
class="math inline">\([x_{w-1}, x_{w-2}, ..., x_0]\)</span> 的操作数
<span class="math inline">\(x\)</span>, <code>x&lt;&lt;k</code>的结果是
<span class="math inline">\([0, ..., 0, x_{w-1}, x_{w-2}, ...,
x_{k}]\)</span> 也就是说，向右移动 <span
class="math inline">\(k\)</span> 位，抛弃最右侧的k位，在左端补0</p>
<h3 id="算术右移">1.2 算术右移</h3>
<p>与逻辑右移不同的是，同样是抛弃最右侧k位，但<strong>在左端补原数的最高有效位</strong>，
即对于一个位向量表示为 <span class="math inline">\([x_{w-1}, x_{w-2},
..., x_0]\)</span> 的操作数 <span class="math inline">\(x\)</span>,
<code>x&lt;&lt;k</code>（算术右移）的结果是 <span
class="math inline">\([x_{w-1}, x_{w-1}, ..., x_{w-1}, x_{w-2}, ...,
x_{k}]\)</span></p>
<p>大多数C编译器使用算术右移。但对于无符号数除外，因为无符号数只能逻辑右移。
Java标准明确规定执行逻辑右移。</p>
<blockquote>
<p>Tips:</p>
<p>UB (Undefined Behavior) 是指C或C++标准并未定义的语法，
这通常意味着编译器可以在遇到ub时做任何事，比如打开一个游戏
<del>我在某个群听到说古老版本的g++碰到ub就是打开一个游戏</del></p>
<p>那么为什么要有ub呢？是因为制定标准的人没想到吗？为什么java没有ub呢？</p>
<p>大家知道C和C++是偏向底层的语言，追求速度（即便C++有OOP
模板元等特性，但也追求零开销抽象）
而对于不同情况，留下一些“漏洞”让编译器自行决定在某些特定场合
<del>比如造火箭</del> 可以追求到极致速度
而Java则没有这样的问题，毕竟JVM上的东西
就算没有GC也不可能满足某些场景下的苛刻条件的，那些场景比卡常还难</p>
</blockquote>
<p>左右移运算符优先级低。使用时请注意括号。</p>
<h2 id="二-类型转换">二 类型转换</h2>
<p>定义补码为表示 <span class="math inline">\(T\)</span>, 无符号数表示为
<span class="math inline">\(U\)</span>, 二进制数为 <span
class="math inline">\(B\)</span>, 而<code>2</code>则代表<code>to</code>
定义函数 <span class="math inline">\(U2B_w\)</span>
为无符号数到二进制数转换函数，两者都是 <span
class="math inline">\(w\)</span> 位表示的， 其他 <span
class="math inline">\(U2T_w\)</span> <span
class="math inline">\(T2B_w\)</span> 以此类推</p>
<blockquote>
<p>关于这个的理解：
虽然说叫<code>转换</code>，但实际上可以理解为<code>把...当成...看 计算出的结果</code>
比如<code>B2T</code>就是<code>把二进制看成补码，得出的结果的十进制表示</code>
这里的B代表的二进制是最基础的01位向量</p>
</blockquote>
<h3 id="无符号数-b2u">2.1 无符号数 （B2U）</h3>
<p>对于向量 $ x=[x_{w-1}, x_{w-2}, …, x_0]$ ：</p>
<p><span
class="math display">\[B2U_w(x)=\sum_{i=0}^{w-1}x_i2^i\]</span></p>
<p>这个和 OI
一些比赛初赛的二进制相关是一样的，可以手动模拟一下，没学过求和符号的可以看这个</p>
<p><span class="math display">\[U2B_4([1011])=1 \times 2^3+0 \times2^2 +
1 \times 2^1 + 1 \times 2^0=11\]</span></p>
<p>考虑 <span class="math inline">\(w\)</span>
位二进制表示的最大值和最小值。最小值当然就是0（负数的表示以后会说）
最大值即为<span class="math inline">\(\sum_{i=0}^{w-1}2^i\)</span>，
即向量每一位都是1。 根据等比数列公式易得<span
class="math inline">\(\sum_{i=0}^{w-1}2^i=2^w-1\)</span></p>
<p>函数 <span class="math inline">\(B2U_w\)</span>
是一个双射，即任意一个 <span class="math inline">\([0,2^w-1]\)</span>
的无符号数都有唯一的二进制表示， 同时每个 <span
class="math inline">\(w\)</span> 二进制表示都对应唯一一个 <span
class="math inline">\([0,2^w-1]\)</span> 的无符号数</p>
<h3 id="补码表示-b2t">2.2 补码表示 （B2T）</h3>
<p>根据补码的定义，易得以下公式（其实手动带个数进去就好了）</p>
<p><span
class="math display">\[B2T_w(x)=-x_{w-1}2^{w-1}+\sum_{i=0}^{w-2}x_{i}2^{i}\]</span></p>
<p>最高为 <span class="math inline">\(x_{w-1}\)</span>
称为符号位。如果是 <span class="math inline">\(0\)</span> 则 <span
class="math inline">\(-0=0\)</span> 所以不计（正数），如果是 <span
class="math inline">\(1\)</span> 则 <span
class="math inline">\(-1=1\)</span> 乘上 <span
class="math inline">\(2^{w-1}\)</span> 即表示负数
如果不知道这种方式为什么能表达补码 那么请看下面</p>
<p>首先我们知道补码的定义是反码加一，反码也就是最高位符号位
剩下的位都取反。 所以</p>
<p><span class="math display">\[[1011]_{2\text{补码}} =
[1010]_{2\text{反码}} = -[101]_{2} = -(1\times 2^{2}+0+1\times
2^0=-(4+1)=-5)\]</span></p>
<p>而根据上面公式</p>
<p><span class="math display">\[B2T_4([1011])=-1\times
2^{3}+\sum_{i=0}^{2}x_{i}2^{i}=-8+1\times 2^0+1\times
2^{1}+0=-8+1+2=-5\]</span></p>
<p>看明白逻辑了吗？<span class="math inline">\(B2T\)</span>
的公式实际上就是以负的为基准然后加上正的（相当于取反再取反）
而常规（按照定义算）是直接取反后加好正的然后取相反数
<del>有些大佬也可以证明一下这两个公式等价</del></p>
<p>和上面一样的推理，<span
class="math inline">\(TMax_w=2^{w-1}-1\)</span>， 而 <span
class="math inline">\(TMin_w=-2^{w-1}\)</span> 有没有感觉熟悉？ <span
class="math inline">\([-2147483648, 2147483647]\)</span> （即 <span
class="math inline">\(-2^{31}\)</span> 和 <span
class="math inline">\(2^{31}-1\)</span></p>
<p>同样，<span class="math inline">\(B2T\)</span> 也是一个双射。</p>
<blockquote>
<p>C标准并没有说有符号整数一定要用补码表示，即使大多数实现都是这样做。
Java要求采用补码表示。同时单字节数据是<code>byte</code>而不是<code>char</code>。</p>
</blockquote>
<h3 id="其他表示">2.3 其他表示</h3>
<p>我们知道除了补码 还有原码和反码。</p>
<p>反码与补码唯一的差别就是一个 <span
class="math inline">\(1\)</span>。所以只要把 <span
class="math inline">\(B2T\)</span> 公式的最高符号位改为 <span
class="math inline">\(-x_{w-1}(2^{w-1}-1)\)</span> 用 <span
class="math inline">\(O\)</span> 表示反码 (<strong>O</strong>nes’
Complement)，则</p>
<p><span
class="math display">\[B2O_w(x)=-x_{w-1}(2^{w-1}-1)+\sum_{i=0}^{w-2}x_{i}2^{i}\]</span></p>
<p>原码的公式也可以很简单地推导出来，这里不再赘述。</p>
<p>这两种表示方法的缺点是 <span class="math inline">\(0\)</span>
可以有两种表示。而且不具备补码在计算上的优势。</p>
<hr />
<h3 id="待更还有补码相关内容">待更，还有补码相关内容</h3>
<p>写在后面的话：</p>
<p>从发暂退役帖以来已经很久了 感谢大家的关心
说真的没想到有那么多人评论</p>
<p>我发现我不知道我学习OI的目标是什么，即使我在写题学算法的过程中感受到了快乐</p>
<p>但每次做不出题都会有极大挫败感
然后心里那种别扭的劲就总想让逼我更加油一点</p>
<p>而这样慢慢就变成「自己给自己下任务」了，那份纯粹的快乐也没有了</p>
<p>然后越来越焦虑，总觉得自己努力还不够 结果陷入恶性循环</p>
<hr />
<p>Manjaro KDE是真的离谱，设置上外观全没，动不动显卡驱动挂了</p>
<p>有时候调整音量那个显示在屏幕中间的音量大小图标（仿macOS的主题）
就会直接截取那个位置上显示的东西 然后还自己消失不掉
而且这个状态下放任何东西都没声，b站还是别的视频都打不开</p>
<p>点任务栏浏览器也没反应，我</p>
<p><a target="_blank" rel="noopener" href="https://imgchr.com/i/y9oUaR"><img
src="https://s3.ax1x.com/2021/01/28/y9oUaR.png"
alt="y9oUaR.png" /></a></p>
<p>嗯， 然后过了好久才反映，这反射弧是NM离谱</p>

    </div>
    
    
      <footer class="post-footer">
        <div class="post-tags">
          <strong>Filed under:</strong>
          
            <a href="/tags/%E8%BF%81%E7%A7%BB/" class="tag">#迁移</a>
          
            <a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%A7%91%E5%AD%A6/" class="tag">#计算机科学</a>
          
        </div>
      </footer>
    
    
    <div class="post-nav">
      
        <a href="/2021/01/31/move_to_opensuse/" class="post-nav-prev">
          <span class="nav-label">← Previous Story</span>
          <span class="nav-title">换了个 OpenSUSE 玩玩</span>
        </a>
      
      
      
        <a href="/2020/12/25/2020_curtain_falls/" class="post-nav-next">
          <span class="nav-label">Next Story →</span>
          <span class="nav-title">辉煌落幕 -- 2020 年终总结</span>
        </a>
      
    </div>
  </article>
  
  
    <aside class="post-sidebar">
  
    <div class="sidebar-toc">
      <h3 class="sidebar-title">Table of Contents</h3>
      <div class="toc-content">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#csapp-today-2021-01-18"><span class="toc-number">1.</span> <span class="toc-text">CSAPP Today 2021-01-18</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%80-%E5%B7%A6%E7%A7%BB%E5%92%8C%E5%8F%B3%E7%A7%BB"><span class="toc-number">1.1.</span> <span class="toc-text">一 左移和右移</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%80%BB%E8%BE%91%E5%8F%B3%E7%A7%BB"><span class="toc-number">1.1.1.</span> <span class="toc-text">1.1 逻辑右移</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%9C%AF%E5%8F%B3%E7%A7%BB"><span class="toc-number">1.1.2.</span> <span class="toc-text">1.2 算术右移</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8C-%E7%B1%BB%E5%9E%8B%E8%BD%AC%E6%8D%A2"><span class="toc-number">1.2.</span> <span class="toc-text">二 类型转换</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%97%A0%E7%AC%A6%E5%8F%B7%E6%95%B0-b2u"><span class="toc-number">1.2.1.</span> <span class="toc-text">2.1 无符号数 （B2U）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A1%A5%E7%A0%81%E8%A1%A8%E7%A4%BA-b2t"><span class="toc-number">1.2.2.</span> <span class="toc-text">2.2 补码表示 （B2T）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E8%A1%A8%E7%A4%BA"><span class="toc-number">1.2.3.</span> <span class="toc-text">2.3 其他表示</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BE%85%E6%9B%B4%E8%BF%98%E6%9C%89%E8%A1%A5%E7%A0%81%E7%9B%B8%E5%85%B3%E5%86%85%E5%AE%B9"><span class="toc-number">1.2.4.</span> <span class="toc-text">待更，还有补码相关内容</span></a></li></ol></li></ol></li></ol>
      </div>
    </div>
  
  
  
    <div class="sidebar-author">
      <div class="author-avatar avatar-rounded">
        <img src="/images/icon.jpg" alt="Avatar">
      </div>
      <p class="author-name">折鸦夜明け前</p>
    </div>
  
  
  
    <div class="sidebar-social">
      <h3 class="sidebar-title">Follow</h3>
      <ul class="social-links">
        
          <li>
            <a href="https://github.com/amiriox" target="_blank" rel="noopener">GitHub</a>
          </li>
        
          <li>
            <a href="mailto:wumingyun2120@gmail.com" target="_blank" rel="noopener">E-Mail</a>
          </li>
        
          <li>
            <a href="https://www.zhihu.com/people/wu-ming-57-22-24" target="_blank" rel="noopener">Zhihu</a>
          </li>
        
          <li>
            <a href="https://space.bilibili.com/444947789" target="_blank" rel="noopener">Bilibili</a>
          </li>
        
      </ul>
    </div>
  
  
  
    <div class="sidebar-links">
      <h3 class="sidebar-title">友情链接</h3>
      <ul class="friend-links">
        
          <li>
            <a href="https://kawayww.com/" target="_blank" rel="noopener">柳下川的博客</a>
          </li>
        
          <li>
            <a href="https://www.overturn.cn/" target="_blank" rel="noopener">远视台</a>
          </li>
        
      </ul>
    </div>
  
</aside>

  
</div>

    </main>
    
    <footer class="newspaper-footer">
  <div class="footer-divider"></div>
  
  <div class="footer-content">
    <div class="footer-section">
      <h3>折鸦夜明け前</h3>
      <p>Est. 2020</p>
      
        <p class="footer-since">Since 2023</p>
      
    </div>
    
    
    <div class="footer-section">
      <h3>Follow Us</h3>
      <ul class="social-links">
        
          <li><a href="https://github.com/amiriox" target="_blank" rel="noopener">GitHub</a></li>
        
          <li><a href="mailto:wumingyun2120@gmail.com" target="_blank" rel="noopener">E-Mail</a></li>
        
          <li><a href="https://www.zhihu.com/people/wu-ming-57-22-24" target="_blank" rel="noopener">Zhihu</a></li>
        
          <li><a href="https://space.bilibili.com/444947789" target="_blank" rel="noopener">Bilibili</a></li>
        
      </ul>
    </div>
    
    
    
    <div class="footer-section">
      <h3>友情链接</h3>
      <ul class="footer-links">
        
          <li><a href="https://kawayww.com/" target="_blank" rel="noopener">柳下川的博客</a></li>
        
          <li><a href="https://www.overturn.cn/" target="_blank" rel="noopener">远视台</a></li>
        
      </ul>
    </div>
    
    
    <div class="footer-section">
      <h3>Navigation</h3>
      <ul class="footer-nav">
        
          <li><a href="/">Home</a></li>
        
          <li><a href="/archives">Archives</a></li>
        
          <li><a href="/categories">Categories</a></li>
        
          <li><a href="/tags">Tags</a></li>
        
          <li><a href="/about">About</a></li>
        
      </ul>
    </div>
  </div>
  
  <div class="footer-bottom">
    <p>© 2025 The Daily Amiriox Makinohara. All Rights Reserved.</p>
    <p>
      
        Made with <span class="footer-icon icon-animated" style="color: #8b0000">⚂</span> · 
      
      Powered by <a href="https://hexo.io" target="_blank" rel="noopener">Hexo</a> · Theme Newspepper
    </p>
  </div>
</footer>

  </div>
  
  <script src="/js/script.js"></script>

</body>
</html>
